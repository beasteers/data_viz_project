{% extends 'base.j2' %}


{% block content %}
	<div id="vis">
		<div id="subway-line-labels"></div>
		<div id="line-details">
			<h3 class="title">Please select a MTA line</h3>
			<p class="description"></p>
		</div>
		<div id="chart"></div>
	</div>
{% endblock %}


{% block scripts %}	
	<script>
		var map_geojson = {{ map_geojson|tojson }};
	</script>


	<script src="{{ url_for('static', filename='main.js') }}"></script>
	<script>
	// get the label data for each line
    d3.csv("{{ url_for('static', filename='data/GTFS_nyc_Subway/routes.txt') }}", function(data){
    	console.log(data);
    	drawSubwayLabels(data); 
    });

    // test getting the stop time data
    d3.json("/data/trips/GS", function(data){
    	console.log(data);
    	// drawStationTSDiagram(data);
    });

    // draw the map
    if(map_geojson) {
    	console.log(map_geojson);
    	drawMap(map_geojson);
    }

  </script>
{% endblock %}