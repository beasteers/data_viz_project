{% extends 'base.j2' %}


{% block content %}
    <header id='header'>
        <div id='subway-line-labels'></div>
        <div id='line-details'>
            <h3 class='title'>Please select a MTA line</h3>
            <p class='description'></p>
        </div>
    </header>
	<div id='vis'>
		<div class='container-fluid'>
            <div class='row'>
                <div class='col'></div>
                <div class='station-desc col d-none'></div>
                <div class='station-desc col d-none'></div>
            </div>
            <div class='row'>
                <div class='col' id='map'>
                    <div class='wrap sticky-top'></div>
                </div>
                <div class='marey col d-none' id='marey1'></div>
                <div class='marey col d-none' id='marey2'></div>
            </div>
        </div>
	</div>
{% endblock %}


{% block scripts %}	
	<script>
		var map_geojson = {{ map_geojson|tojson }};
	</script>

	<script src="{{ url_for('static', filename='main.js') }}"></script>
	<script>
	// get the label data for each line
    d3.csv("{{ url_for('static', filename='data/GTFS_nyc_Subway/routes.txt') }}", function(data){
    	console.log(data);
    	drawSubwayLabels(data); 
    });

    // test getting the stop time data
    d3.json("/data/trips/GS", function(data){
    	console.log(data);
    	// drawStationTSDiagram(data);
    });

    // draw the map
    if(map_geojson) {
    	console.log(map_geojson);
    	drawMap(map_geojson);
    }

  </script>
{% endblock %}